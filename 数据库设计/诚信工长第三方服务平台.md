## 诚信工长第三方服务平台

- 接口基准地址：`http://localhost:3000`

- 数据返回格式统一使用 JSON ( 如有其他格式将在接口文档声明 )

  ##### 通用返回状态说明

  | 状态码 | 含义                  | 说明                                 |
  | ------ | --------------------- | ------------------------------------ |
  | 200    | OK                    | 请求成功                             |
  | 404    | NOT FOUND             | 请求的资源部存在                     |
  | 500    | INTERNAL SERVER ERROR | 服务端错误                           |
  | 403    | FORBIDDEN             | 禁止访问                             |
  | 401    | UNAUTHORIZED          | 为授权（登录状态过期或未登录时返回） |

  

### （一）数据库设计

- 数据库名 : Foreman


- 数据库账号 : root


- 数据库密码 : 123456


- 数据库 :utf8  排序规则 :utf8_unicode_ci

##### 1、用户表（pms_users)

| 编号 | 字段名称     | 字段类型 | 字段说明                        | 备注                     |      |
| :--: | ------------ | -------- | ------------------------------- | ------------------------ | ---- |
|  1   | u_id         | int      | 用户ID                          | 用户主键                 |      |
|  2   | name         | char     | 用户姓名                        |                          |      |
|  3   | password     | char     | 登录密码                        |                          |      |
|  4   | age          | char     | 年龄                            |                          |      |
|  5   | adder        | char     | 地址                            |                          |      |
|  6   | type         | char     | 用户类型                        | 1工长/2客户/3管理员      |      |
|  7   | style        | char     | 工长擅长装修风格/用户需要的风格 | 古典，现代，欧美，，，， |      |
|  8   | phone        | char     | 联系电话                        |                          |      |
|  9   | header       | char     | 用户头像                        | 缩略图                   |      |
|  10  | Introduction | text     | 简介                            | 工长可设置个人简介       |      |
|  11  | token        | char     | 加密后的信息                    | 用于前后台数据信息安全   |      |
|  12  | createtime   | datetime | 入驻时间                        | 加入平台的时间（工长）   |      |
|  13  | modftime     | datetime | 最近一次在线时间                | 取最近一次登录的时间     |      |
|  14  | email        | char     | 邮箱                            |                          |      |
|  15  | experience   | char     | 工作经验                        | 工长的工作经验（指年限） |      |
|  16  | nature       | char     | 工作性质                        | 1个人/2团队/3公司        |      |
|  17  | sernumber    | char     | 工长的服务次数                  |                          |      |

##### 2、案例表（pms_case)

| 编号 | 字段名称  | 字段类型 | 备注           |      |
| ---- | --------- | -------- | -------------- | ---- |
| 1    | case_id   | int      | 案例id         |      |
| 2    | name      | char     | 案例名称       |      |
| 3    | case_time | datetime | 装修时间       |      |
| 4    | style     | char     | 装修风格       |      |
| 5    | u_id      | int      | 装修工长       |      |
| 6    | link      | char     | 案例封面图片   |      |
| 7    | intr      | text     | 案例简介       |      |
| 8    | area      | char     | 装修面积       |      |
| 9    | case_type | char     | 新房/翻新/改造 |      |
| 10   | price     | char     | 装修花销       |      |
| 11   | case_img  | char     | 装修效果图     |      |
| 12   | material  | char     | 建材           |      |

##### 3、客户评价表(pms_evaluation)

| 编号 | 字段名称 | 字段类型 | 字段说明                | 备注 |
| ---- | -------- | -------- | ----------------------- | ---- |
| 1    | e_id     | int      | 评价主键                |      |
| 2    | u_id     | int      | 获取评价工长/评价用户   |      |
| 3    | time     | datetime | 评价时间                |      |
| 4    | grade    | char     | 评价等级（5星为最高）   |      |
| 5    | content  | text     | 评价内容                |      |
| 6    | e_type   | char     | 评价分类（1好评/2差评） |      |
| 7    | e_img    | char     | 评价图片（非必须）      |      |
| 8    |          |          |                         |      |
| 9    |          |          |                         |      |

##### 4、招标需求表（pms_demand)

| 编号 | 字段名称   | 字段类型 | 字段说明  | 备注     |
| ---- | ---------- | -------- | --------- | -------- |
| 1    | d_id       | int      | 需求id    |          |
| 2    | title      | char     | 需求标题  |          |
| 3    | d_titme    | datetime | 发布时间  |          |
| 4    | status     | char     | 订单状态  | 招标中   |
| 5    | contract   | char     | 承包方式  | 全包招标 |
| 6    | type       | char     | 房屋类别  | 家装     |
| 7    | space      | char     | 住房空间  | 住宅公寓 |
| 8    | status_quo | char     | 房屋现状  | 毛坯房   |
| 9    | area       | char     | 装修面积  |          |
| 10   | structure  | char     | 住房结构  | 四居室   |
| 11   | style      | char     | 装修风格  |          |
| 12   | use        | char     | 房屋用途  | 住房     |
| 13   | budget     | char     | 装修预算  | 面议     |
| 14   | suo_area   | char     | 所在地区  |          |
| 15   | street     | char     | 街道/小区 |          |
| 16   | l_titme    | datetime | 量房时间  |          |
| 17   | do_time    | datetime | 动工时间  |          |
| 20   | Remarks    | char     | 备注      |          |
| 21   | content    | text     | 内容      |          |
| 22   | Claim      | char     | 投标要求  |          |
| 23   | u_id       | int      | 招标人    |          |

##### 5、工长投标表(pms_tender)

| 编号 | 字段名称      | 字段类型 | 字段说明          | 备注 |
| ---- | ------------- | -------- | ----------------- | ---- |
| 1    | t_id          | int      | 投标id            |      |
| 2    | price         | char     | 投标价            |      |
| 3    | name          | char     | 公司名字/工长名字 |      |
| 4    | Qualification | char     | 资质              |      |
| 5    | content       | char     | 标书内容          |      |
| 6    |               |          |                   |      |
| 7    |               |          |                   |      |
| 8    |               |          |                   |      |
| 9    |               |          |                   |      |
| 10   |               |          |                   |      |
| 11   |               |          |                   |      |



##### 6、装修攻略表（pms_Raiders)

| 编号 | 字段名称  | 字段类型 | 备注     |      |
| ---- | --------- | -------- | -------- | ---- |
| 1    | r_id      | int      | 攻略主键 |      |
| 2    | r_title   | char     | 攻略标题 |      |
| 3    | r_content | text     | 攻略内容 |      |
| 4    | r_img     | char     | 效果图片 |      |

##### 7、装修日记（pms_diary)

| 编号 | 字段名称 | 字段类型 | 备注         |      |
| ---- | -------- | -------- | ------------ | ---- |
| 1    | d_id     | int      | 日记主键     |      |
| 2    | u_id     | int      | 日记发布人   |      |
| 3    | title    | char     | 日记标题     |      |
| 4    | d-time   | datetime | 日记发布时间 |      |
| 5    | content  | text     | 日记内容     |      |
| 6    | d_img    | char     | 日记图片     |      |
| 7    | adder    | char     | 地点         |      |
| 8    | area     | char     | 装修面积     |      |
| 9    | style    | char     | 装修风格     |      |
| 10   | stage    | char     | 装修阶段     |      |



### （二）接口设计

- 首页接口路径：/index

- 请求方法：个体

- 响应参数

  | 参数名    | 参数说明         | 类型  | 备注 |
  | --------- | ---------------- | ----- | ---- |
  | banner    | 首页轮播图片     | array |      |
  | caseList  | 首页案例展示数据 | array |      |
  | raidList  | 装修攻略数据     | array |      |
  | fromnList | 优秀工长         | array |      |

  

- 注册接口：/user/reg

- 请求方法：post

- 请求参数

  | 参数名   | 参数说明 | 类型   | 备注 |
  | -------- | -------- | ------ | ---- |
  | name     | 用户姓名 | string | 非空 |
  | password | 密码     | string | 非空 |
  |          |          |        |      |
  |          |          |        |      |

  

- 登录接口：/user/login
- 请求方法：post





- 客户发布需求接口：/user/demand